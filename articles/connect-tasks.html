<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="connectapi.dag">
<title>Connect Tasks • connectapi.dag</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Connect Tasks">
<meta property="og:description" content="connectapi.dag">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">connectapi.dag</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/connect-tasks.html">Connect Tasks</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Connect Tasks</h1>
            
      
      
      <div class="d-none name"><code>connect-tasks.Rmd</code></div>
    </div>

    
    
<p>A Connect Task is any form of content published to Posit Connect that
has the ability to be scheduled for a render. This includes content such
as:</p>
<ul>
<li>Rmd</li>
<li>Quarto</li>
<li>Jupyter Notebooks</li>
</ul>
<p>In out-of-the-box Posit Connect, these content items may be scheduled
to run, or may be run on-command from the UI.</p>
<p>This package provides functionality to programmatically run these
tasks using triggers outside of the out-of-box experience. The
<code>connectapi</code> package provides the base functionality we need
to achieve this goal. This [<code>connectapi.dag</code>] package
provides simplified wrappers around these capabilities for the explicit
purpose of orchestrating these tasks ourselves.</p>
<div class="section level2">
<h2 id="programmatically-run-tasks">Programmatically Run Tasks<a class="anchor" aria-label="anchor" href="#programmatically-run-tasks"></a>
</h2>
<p>Before we jump into full orchestration, let’s start simple. Let’s
start with a single task the runs conditionally.</p>
<p>Normally, connect tasks are created by providing their content guid
as the first parameter to the <code>connect_task</code> function. For
this walk through, we’ll use simulated tasks instead, and give them
human-friendly names for simplicity’s sake.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://timeddilation.github.io/connectapi.dag/">connectapi.dag</a></span><span class="op">)</span></span>
<span><span class="va">notify_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"email_stakeholder"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>With our task defined, we can now simply call the
<code>task_run</code> function on it to execute the task. This may be
envoked from an existing job, from a Shiny application, or from an
API.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">some_condition</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">some_condition</span><span class="op">)</span> <span class="fu"><a href="../reference/task_run.html">task_run</a></span><span class="op">(</span><span class="va">notify_task</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting task email_stakeholder</span></span>
<span><span class="co">#&gt; Task Succeeded</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="statuses">Statuses<a class="anchor" aria-label="anchor" href="#statuses"></a>
</h2>
<p>All connect tasks have a status. They may be accessed directly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">notify_task</span><span class="op">$</span><span class="va">status</span></span>
<span><span class="co">#&gt; [1] "Succeeded"</span></span></code></pre></div>
<p>There are 4 possible statuses a task may be in.</p>
<ul>
<li>
<strong>Pending</strong>: Task has not run yet</li>
<li>
<strong>Succeeded</strong>: Task ran successfully without error</li>
<li>
<strong>Failed</strong>: Task encountered an error</li>
<li>
<strong>Skipped</strong>: Task did not meet criteria to run and has
completed evaluation.</li>
</ul>
<p>All newly created tasks start in the <em>Pending</em> status.</p>
<p>When a task is ran using the <code>task_run</code> function, it may
stop in any of the terminal statuses; <em>Succeeded</em>,
<em>Failed</em>, or <em>Skipped</em>. Once terminal, attempting to call
the <code>task_run</code> function again will result in an error.</p>
<p>In happy path, tasks will be in the <em>Succeeded</em> status after
evaluation. If an error is encountered while running the task, the task
will be in the <em>Failed</em> status. And if the preconditions for the
task are not met (defined in the <code>trigger_rule</code> parameter)
then it is <em>Skipped</em>.</p>
<p><strong>All terminal statuses count as completing evaluation</strong>
for the purposes of the Trigger rules.</p>
</div>
<div class="section level2">
<h2 id="dependency-chains">Dependency Chains<a class="anchor" aria-label="anchor" href="#dependency-chains"></a>
</h2>
<p>Dependency chains are the foundation of DAGs in this package. Almost
all of the heavy lifting for orchestrating DAGs is actually defined on
the tasks.</p>
<p>In even simple data pipelines, you may decompose the steps of the
analysis into three general steps; extract, transform, and load. Loading
usually means storing the data, but may also be a final product or
presentation.</p>
<p>Let’s consider our <em>notify stakeholder</em> task. This task is
triggered when an analysis is complete and ready for them to view. The
<em>analysis</em> task is a dependency of our <em>notify
stakeholder</em> task. Therefore, we want to ensure the
<em>analysis</em> task has completed before we attempt to run our
<em>notify stakeholder</em> task.</p>
<p>This is when it becomes necessary to define our task dependency
chain. What tasks must occur before we run? What preconditions should
those tasks have for me to run? What tasks should occur after we
run?</p>
<p>Tho define these dependency chains, this package offers the functions
<code>set_upstream</code> and <code>set_downstream</code> to define
dependency (run before) tasks and dependent (run after) tasks
respectively.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"analysis"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">notify_task</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/set_upstream.html">set_upstream</a></span><span class="op">(</span><span class="va">analysis_task</span><span class="op">)</span></span></code></pre></div>
<p>Now, our <em>notify stakeholder</em> task will only run after the
<em>analysis</em> task is complete. We can visualize this dependency
chain by using <code>plot</code> on any of the tasks. Note the the
<code>plot</code> function on a task will only show the immediate
dependencies and dependents.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">notify_task</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect-tasks_files/figure-html/unnamed-chunk-5-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Dependency chains may grow exceptionally in complexity. This package
offers a simplified interface to express these dependency chains and
ensure their consistency.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extract_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"extract"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">analysis_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"analysis"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">notify_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"email_stakeholder"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">model_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"train_model"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">analysis_task</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_upstream.html">set_upstream</a></span><span class="op">(</span><span class="va">extract_task</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_downstream.html">set_downstream</a></span><span class="op">(</span><span class="va">notify_task</span>, <span class="va">model_task</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">analysis_task</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect-tasks_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<div class="section level3">
<h3 id="extending-dependency-chains">Extending Dependency Chains<a class="anchor" aria-label="anchor" href="#extending-dependency-chains"></a>
</h3>
<p>Dependency chiains do not need to be a one-hop away. Dependency
chains may be extended to any tree depth, and orchestrated using Connect
DAGs in this packache.</p>
<p>However, plotting a single task will only display the immediate
(one-hop) links. For example, we may have a final task after our
modelling task is complete to update the model hosted in our plumber
API.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reload_api_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"deploy_model"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">reload_api_model</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/set_upstream.html">set_upstream</a></span><span class="op">(</span><span class="va">model_task</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model_task</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect-tasks_files/figure-html/unnamed-chunk-7-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Notice that when we plot the <em>Model Task</em> it does not include
the extract nor the notify task. Only plotting DAGs will display the
full dependency chain. Refer to the Connect DAGs vignette for more
details.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_dag.html">connect_dag</a></span><span class="op">(</span><span class="va">extract_task</span>, <span class="va">analysis_task</span>, <span class="va">notify_task</span>,</span>
<span>                      <span class="va">model_task</span>, <span class="va">reload_api_model</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_dag</span>, plotly <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect-tasks_files/figure-html/unnamed-chunk-8-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="trigger-rules">Trigger Rules<a class="anchor" aria-label="anchor" href="#trigger-rules"></a>
</h2>
<p>In many cases, there are conditions we want to ensure are met
regarding upstream tasks. In most cases, you will want to ensure the
upstream task(s) completed successfully before executing. However, there
are many more possible situations where it is appropriate to run the
task.</p>
<p>This is where <em>Trigger Rules</em> comes in. They allow you to
control what upstream scenarios are acceptable as a precondition to
running. The following trigger rules are provided:</p>
<ul>
<li>
<strong>all_success</strong>: All upstream tasks executed
successfully.</li>
<li>
<strong>all_failed</strong>: All upstream tasks failed during
execution.</li>
<li>
<strong>all_skipped</strong>: All upstream tasks skipped
execution.</li>
<li>
<strong>all_done</strong>: All upstream tasks completed evaluation.
This includes skipped tasks.</li>
<li>
<strong>one_success</strong>: At least one upstream task executed
successfully.</li>
<li>
<strong>one_failed</strong>: At least one upstream task failed
during execution.</li>
<li>
<strong>one_done</strong>: At least one upstream task completed
evaluation. This includes skipped tasks.</li>
<li>
<strong>none_failed</strong>: No upstream tasks failed. All other
upstream tasks completed evaluation.</li>
<li>
<strong>none_skipped</strong>: No upstream tasks skipped. All other
upstream tasks completed evaluation.</li>
<li>
<strong>always</strong>: Task will always run regardless of upstream
task statuses.</li>
</ul>
<p>By default, tasks use the <em>all_success</em> trigger rule. This may
be changed when defining the task. For example, maybe we need to notify
the data provider when there was an issue with the extraction step.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">notify_vendor</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span></span>
<span>  <span class="st">"notify_vendor"</span>,</span>
<span>  trigger_rule <span class="op">=</span> <span class="st">"all_failed"</span>,</span>
<span>  simulated <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/set_upstream.html">set_upstream</a></span><span class="op">(</span><span class="va">extract_task</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">extract_task</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect-tasks_files/figure-html/unnamed-chunk-9-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Now, we will only run the <em>notify vendor</em> task when there is a
failure with the extraction step. Otherwise, it will be skipped.</p>
</div>
<div class="section level2">
<h2 id="connect-validation">Connect Validation<a class="anchor" aria-label="anchor" href="#connect-validation"></a>
</h2>
<p><strong>Note</strong>: all examples use <code>simulated = TRUE</code>
parameter for tasks to skip validation with a real Posit Connect server.
In actual usage, this value should be <code>FALSE</code> (the default)
instead.</p>
<p>When defining a Connect Task, you must specify the content guid, and
access details to the Connect Server.</p>
<p>Access details are identical to those required by <a href="https://pkgs.rstudio.com/connectapi/articles/getting-started.html" class="external-link">connectapi::connect()</a>,
as this is what is used under the hood. Most importantly, you should be
using environment variables to manage the access details.</p>
<p>It is highly recommended to use the following environment variable,
as they are the default expected by this package, as well as
<code>connectapi</code> and <code>pins</code>.</p>
<pre><code>CONNECT_SERVER = https://connect.example.com
CONNECT_API_KEY = your-api-key</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">task0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"be4e0fe3-ab35-4f07-bc8e-cd5d4a7b8452"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Of course, you may define your own options to these parameters as you
desire.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">task0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_task.html">connect_task</a></span><span class="op">(</span></span>
<span>  <span class="st">"be4e0fe3-ab35-4f07-bc8e-cd5d4a7b8452"</span>,</span>
<span>  server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CONNECT_HOST"</span><span class="op">)</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CONNECT_KEY"</span><span class="op">)</span>,</span>
<span>  simulated <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">task0</span></span>
<span><span class="co">#&gt; ConnectTask: </span></span>
<span><span class="co">#&gt;   GUID: simulated_be4e0fe3-ab35-4f07-bc8e-cd5d4a7b8452 </span></span>
<span><span class="co">#&gt;   Name: be4e0fe3-ab35-4f07-bc8e-cd5d4a7b8452 </span></span>
<span><span class="co">#&gt;   Trigger Rule: all_success </span></span>
<span><span class="co">#&gt;   App Mode: simulation </span></span>
<span><span class="co">#&gt;   Status: Pending </span></span>
<span><span class="co">#&gt;   Upstream Tasks: 0 </span></span>
<span><span class="co">#&gt;   Downstream Tasks: 0</span></span></code></pre></div>
<p>When using non-simulated tasks, the name of the task will be the
title of the content on Connect.</p>
<div class="section level3">
<h3 id="multiple-servers">Multiple Servers<a class="anchor" aria-label="anchor" href="#multiple-servers"></a>
</h3>
<p>It is perfectly valid for a single DAG to run tasks hosted in
separate servers. As long as the appropriate credentials are passed when
defining the DAG, then you may use any number of separate servers and/or
API keys for the tasks.</p>
</div>
</div>
<div class="section level2">
<h2 id="simulated-tasks">Simulated Tasks<a class="anchor" aria-label="anchor" href="#simulated-tasks"></a>
</h2>
<p>Simulated tasks are Connect Task environments that do not make any
attempt to communicate with a Connect Server. They therefore skip
validation with the server and assume the guid provided will also be the
name of the task.</p>
<p>There are two ways to create simulated tasks. The simplest way is to
use the <code>simulated = TRUE</code> parameter when calling
<code><a href="../reference/connect_task.html">connect_task()</a></code>. Tasks created this way will also
immediately evaluate as <em>Succeeded</em> when you run
<code><a href="../reference/task_run.html">task_run()</a></code> on it.</p>
<p>The second way is to use the <code><a href="../reference/sim_task.html">sim_task()</a></code> function. This
function does not have Connect access parameters, and adds an additional
parameter called <code>fail_prob</code>. This new parameter allows you
to define a random chance for the task to fail. The value is set between
0 and 1, where 0 is always fail, and 1 is always succeed.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">connect_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_task.html">sim_task</a></span><span class="op">(</span><span class="st">"some_task"</span>, fail_prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p>Tasks with a random chance to fail are useful when you want to see
various scenarios of a DAG run. Outside of that use case, however, are
otherwise useless.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tyler Neumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
