<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create an Rmd file you can deploy to Posit Connect to run your pinned DAG.
You may have to edit some aspects of this file, if for instance you have different
`board_connect()` parameters than the default."><title>Write a deployable Rmd file for a ConnectDAG — dag_write_rmd • connectapi.dag</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Write a deployable Rmd file for a ConnectDAG — dag_write_rmd"><meta property="og:description" content="Create an Rmd file you can deploy to Posit Connect to run your pinned DAG.
You may have to edit some aspects of this file, if for instance you have different
`board_connect()` parameters than the default."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">connectapi.dag</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/connect-tasks.html">Connect Tasks</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Write a deployable Rmd file for a ConnectDAG</h1>
      
      <div class="d-none name"><code>dag_write_rmd.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create an Rmd file you can deploy to Posit Connect to run your pinned DAG.
You may have to edit some aspects of this file, if for instance you have different
`board_connect()` parameters than the default.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dag_write_rmd</span><span class="op">(</span></span>
<span>  <span class="va">env</span>,</span>
<span>  pin_name <span class="op">=</span> <span class="va">env</span><span class="op">$</span><span class="va">pin_name</span>,</span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">env</span><span class="op">$</span><span class="va">pin_name</span>, <span class="st">"_job"</span>, <span class="st">".Rmd"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>env</dt>
<dd><p>A ConnectDAG R6 environment created by <a href="connect_dag.html">connect_dag</a></p></dd>


<dt>pin_name</dt>
<dd><p>A scalar character of the name of the pin on the Connect Board</p></dd>


<dt>file</dt>
<dd><p>The name of the file that will be generated</p></dd>


<dt>...</dt>
<dd><p>Arguments passed to <a href="https://pins.rstudio.com/reference/board_connect.html" class="external-link">board_connect</a></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Before attempting to write the Rmd file, this function checks if the pin actually exists.
Parameters passed to `...` will pass down to `pins::board_connect()` to be able to check.
Beyond that, this function does not use the connection to the board.</p>
<p>The generated Rmd file contains 3 code chunks: _setup_, _run-dag_, and _save_.
First, an environment set up loads the necessary packages and reads the
ConnectDAG environment from the pin.
Then, it runs the dag, resetting the state of the DAG before running.
Lastly, it saves the new version of the DAG back to the Connect Pin.</p>
<p>In the _setup_ chunk, a connection to the board is made using the pins package.
You may need to modify this code to work in your environment if you are using
anything other than the defaults for `pins::board_connect()`.</p>
<p>In the _run-dag_ chunk, you should not need to modify anything.
This will simply reset all task statuses and then execute the DAG tasks.</p>
<p>In the _save_ chunk, when overwriting the DAG to the Connect Pin, it is versioned.
You may also need to modify the parameters of `connectapi.dag::dag_write_connect_pin()`
if using anything other than the defaults.
The DAG also contains the state information of all the tasks
in the DAG after the DAG finishes executing.
These versions keep a working history of each DAG's run,
allowing you to load previous versions of the DAG.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">task0</span> <span class="op">&lt;-</span> <span class="fu"><a href="connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"task0"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task1</span> <span class="op">&lt;-</span> <span class="fu"><a href="connect_task.html">connect_task</a></span><span class="op">(</span><span class="st">"task1"</span>, simulated <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task0</span> <span class="op">|&gt;</span> <span class="fu"><a href="set_downstream.html">set_downstream</a></span><span class="op">(</span><span class="va">task1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="connect_dag.html">connect_dag</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"my_dag"</span>, <span class="va">task0</span>, <span class="va">task1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dag_write_connect_pin.html">dag_write_connect_pin</a></span><span class="op">(</span><span class="va">my_dag</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">dag_write_rmd</span><span class="op">(</span><span class="va">my_dag</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tyler Neumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

